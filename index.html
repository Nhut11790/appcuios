<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>App Cài Đặt iOS</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin-top: 50px; }
    h1 { color: #2c3e50; }
    p { color: #555; }
    .box { margin: 20px auto; width: 400px; max-width: 90%; text-align: left; }
    input, button { width: 100%; padding: 10px; margin: 5px 0; }
    button { background: #2c3e50; color: white; border: none; cursor: pointer; }
    button:hover { background: #34495e; }
    .result { margin-top: 20px; padding: 10px; border: 1px solid #ccc; word-break: break-all; }
  </style>
</head>
<body>
  <h1>Tạo link cài đặt IPA</h1>
  <div class="box">
    <label>Link IPA (.ipa):</label>
    <input type="text" id="ipaUrl" placeholder="https://...ipa">
    
    <label>Tên ứng dụng:</label>
    <input type="text" id="appName" placeholder="Tên hiển thị">
    
    <label>Bundle ID:</label>
    <input type="text" id="bundleId" placeholder="com.example.app">
    
    <label>Version:</label>
    <input type="text" id="version" placeholder="1.0.0">
    
    <button onclick="generateLink()">Tạo link cài đặt</button>
  </div>

  <div class="result" id="result"></div>

  <script>
    function generateLink() {
      const ipaUrl = document.getElementById("ipaUrl").value;
      const appName = document.getElementById("appName").value;
      const bundleId = document.getElementById("bundleId").value;
      const version = document.getElementById("version").value;

      const plist = `
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
  <key>items</key>
  <array>
    <dict>
      <key>assets</key>
      <array>
        <dict>
          <key>kind</key>
          <string>software-package</string>
          <key>url</key>
          <string>${ipaUrl}</string>
        </dict>
        <dict>
          <key>kind</key>
          <string>display-image</string>
          <key>needs-shine</key>
          <false/>
          <key>url</key>
          <string>https://nhut11790.github.io/ipacaidat/logo.png</string>
        </dict>
      </array>
      <key>metadata</key>
      <dict>
        <key>bundle-identifier</key>
        <string>${bundleId}</string>
        <key>bundle-version</key>
        <string>${version}</string>
        <key>kind</key>
        <string>software</string>
        <key>title</key>
        <string>${appName}</string>
      </dict>
    </dict>
  </array>
</dict>
</plist>`;

      const blob = new Blob([plist], { type: "text/xml" });
      const plistUrl = URL.createObjectURL(blob);
      const installUrl = `itms-services://?action=download-manifest&url=${plistUrl}`;
      
      document.getElementById("result").innerHTML = `
        <p><b>Link cài đặt:</b></p>
        <a href="${installUrl}">${installUrl}</a>
      `;
    }
  </script>
</body>
</html>
